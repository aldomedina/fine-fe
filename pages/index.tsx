import type { NextPage } from 'next'
import Head from 'next/head'
import dynamic from 'next/dynamic'
import cn from 'classnames'

import { Event, News, Project } from '../types'
import EventCarousel from '../components/EventCarousel'
import Layout from '../containers/Layout'
import NewsCard from '../components/NewsCard'

import fixture from '../fixtures/home'
import projects from '../fixtures/projects'
import styles from '../styles/pages/Home.module.scss'
import Icon from '../components/Icon'
import RoundButton from '../components/RountButton'
import Link from '../components/Link'

interface HomeProps {
  news: News[]
  events: Event[]
  project: Project
}

const DynamicPixelHero = dynamic(() => import('../components/PixelHero'))

const Home: NextPage<HomeProps> = ({ news, events, project }) => {
  const items = project.artworks?.slice(0, 100) || []
  return (
    <Layout greyBG>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <section className={styles.heroWrapper}>
        <div className={styles.content}>
          <div className={styles.main}>
            <div className={styles.rotateSubtitle}>
              <div className={styles.heroSubtitle}>
                <h5>NEW PROJECT</h5>
              </div>
            </div>
            <h2 className={styles.projectName}>{project.name}</h2>
          </div>
          <div className={styles.bottom}>
            <div className={styles.buttonWrapper}>
              <Link href={`/project/${project.id}`}>
                <RoundButton size="xl">GO</RoundButton>
              </Link>
            </div>
            <div className={styles.artistName}>By Adam Ferris</div>
          </div>
        </div>

        <DynamicPixelHero items={items} />
      </section>
      <section className={styles.newsAndEventsWrapper}>
        <div className={styles.eventsWrapper}>
          <p>EVENTS</p>
          <div className={styles.carouselWrapper}>
            <EventCarousel events={events} />
          </div>
        </div>
        <div className={styles.newsWrapper}>
          <p>NEWS</p>
          <div className={styles.newsCardWrapper}>
            {news?.map((item, i) => (
              <NewsCard
                key={`${item.title}${i}`}
                img={item.img}
                alt={item.alt}
                title={item.title}
              />
            ))}
          </div>
        </div>
      </section>
      <section style={{ height: '100vh', backgroundColor: 'white' }}></section>
      <section style={{ height: '100vh', backgroundColor: 'black' }}></section>
    </Layout>
  )
}

export async function getStaticProps() {
  return {
    props: {
      news: fixture.news,
      events: fixture.events,
      project: projects[0]
    },
    revalidate: 60 * 60 * 24 // TODO: currently set to 1 day. Update if required
  }
}

export default Home
